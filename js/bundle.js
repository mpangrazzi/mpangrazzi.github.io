!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Uploader=e()}}(function(){return function e(t,n,r){function o(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t){function n(e,t){Error.call(this),this.message=e,this.status=t||null}var r=e("util");t.exports=n,r.inherits(n,Error)},{util:6}],2:[function(e,t){function n(e){if(o.call(this),"undefined"==typeof FileReader&&this.emit("error",new Error("FileReader API not available")),window.FormData||this.emit("error",new Error("FormData API not available")),this.support={progress:"upload"in new XMLHttpRequest,draggable:"draggable"in document.createElement("span")},this.$el=this._getElement(e.el),this._elType=this.$el.tagName.toLowerCase(),e.name&&"string"!=typeof e.name)throw new TypeError("options `name` must be a string");if(e.url&&"string"!=typeof e.url)throw new TypeError("options `url` must be a string");if(e.method&&"string"!=typeof e.method)throw new TypeError("options `method` must be a string");this.files=[],this.method=e.method||"POST",this.name=e.name||"file",this.url=e.url,this.on("error",this._onError.bind(this)),this._attach()}var r=e("util"),o=e("eventemitter3").EventEmitter,i=e("./errors/upload-error");t.exports=n,r.inherits(n,o),n.prototype._onError=function(e){if(1===this.listeners("error").length)throw e},n.prototype._getElement=function(e){var t=null;if("object"==typeof e){if(!e.nodeName)throw new TypeError("option `el` is not a DOM element");t=e}else{if("string"!=typeof e)throw new TypeError("option `el` is invalid");if(t=document.querySelector(e),!t)throw new Error("options `el` must be an existent DOM element reference")}return t},n.prototype._attach=function(){function e(e){return e.stopPropagation(),e.preventDefault(),this.emit(e.type,e)}var t=this;if("input"===this._elType){if("file"!==this.$el.type)return this.emit("error",new Error('you should attach Uploader to an <input type="file"> tag'));this.$el.onchange=function(){t._read()}}else this.support.draggable?(this.$el.ondragover=e.bind(this),this.$el.ondragleave=e.bind(this),this.$el.ondragstart=e.bind(this),this.$el.ondragend=e.bind(this),this.$el.ondrop=function(e){e.stopPropagation(),e.preventDefault(),t.emit("drop",e),t._read(e.dataTransfer.files)}):this.emit("error",new Error("drag and drop events are not supported.         You should attach Uploader to an <input> tag"))},n.prototype._read=function(e){e||"input"!==this._elType||(e=this.$el.files),this.files.length>0&&(this.files=[]);var t;for(t=0;t<e.length;t++)this.files.push(e[t]);for(this.emit("files:added",this.files),t=0;t<e.length;t++)this._preview(e[t])},n.prototype._preview=function(e){var t=this,n=new FileReader;0===e.type.indexOf("image/")?(n.onload=function(n){var r=new Image;r.onload=function(){t.emit("file:preview",e,r)},r.src=n.target.result},n.readAsDataURL(e)):this.emit("file:preview",e)},n.prototype._upload=function(){for(var e=this,t=new FormData,n=0;n<this.files.length;n++)t.append(this.name,this.files[n]);var r=new XMLHttpRequest;r.open(this.method.toUpperCase(),this.url),r.onerror=function(){var t=this.statusText||"xhr failed to upload";e.emit("error",new i(t))},r.onload=function(){200===this.status?e.emit("upload:done",this.response):e.emit("error",new i(this.response,this.status))},this.support.progress&&(r.upload.onprogress=function(t){if(t.lengthComputable){var n=t.loaded/t.total*100|0;e.emit("upload:progress",n)}}),r.send(t)},n.prototype.upload=function(){this.files.length>0?this._upload():this.emit("error",new i("No files to upload"))},n.prototype.getFiles=function(){return this.files},n.prototype.clearFiles=function(){return this.files=[],!0}},{"./errors/upload-error":1,eventemitter3:7,util:6}],3:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],4:[function(e,t){function n(){}var r=t.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var r=[];if(t){var o=document.createElement("div"),i=new MutationObserver(function(){var e=r.slice();r.length=0,e.forEach(function(e){e()})});return i.observe(o,{attributes:!0}),function(e){r.length||o.setAttribute("yes","no"),r.push(e)}}return n?(window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],5:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],6:[function(e,t,n){(function(t,r){function o(e,t){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(t)?r.showHidden=t:t&&n._extend(r,t),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),a(r,e,r.depth)}function i(e,t){var n=o.styles[t];return n?"["+o.colors[n][0]+"m"+e+"["+o.colors[n][1]+"m":e}function s(e){return e}function u(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function a(e,t,r){if(e.customInspect&&t&&S(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var o=t.inspect(r,e);return w(o)||(o=a(e,o,r)),o}var i=l(e,t);if(i)return i;var s=Object.keys(t),g=u(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),j(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(t);if(0===s.length){if(S(t)){var y=t.name?": "+t.name:"";return e.stylize("[Function"+y+"]","special")}if(E(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(O(t))return e.stylize(Date.prototype.toString.call(t),"date");if(j(t))return f(t)}var v="",m=!1,b=["{","}"];if(d(t)&&(m=!0,b=["[","]"]),S(t)){var _=t.name?": "+t.name:"";v=" [Function"+_+"]"}if(E(t)&&(v=" "+RegExp.prototype.toString.call(t)),O(t)&&(v=" "+Date.prototype.toUTCString.call(t)),j(t)&&(v=" "+f(t)),0===s.length&&(!m||0==t.length))return b[0]+v+b[1];if(0>r)return E(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var x;return x=m?p(e,t,r,g,s):s.map(function(n){return c(e,t,r,g,n,m)}),e.seen.pop(),h(x,v,b)}function l(e,t){if(_(t))return e.stylize("undefined","undefined");if(w(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return m(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,o){for(var i=[],s=0,u=t.length;u>s;++s)i.push(N(t,String(s))?c(e,t,n,r,String(s),!0):"");return o.forEach(function(o){o.match(/^\d+$/)||i.push(c(e,t,n,r,o,!0))}),i}function c(e,t,n,r,o,i){var s,u,l;if(l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},l.get?u=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(u=e.stylize("[Setter]","special")),N(r,o)||(s="["+o+"]"),u||(e.seen.indexOf(l.value)<0?(u=y(n)?a(e,l.value,null):a(e,l.value,n-1),u.indexOf("\n")>-1&&(u=i?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),_(s)){if(i&&o.match(/^\d+$/))return u;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function h(e,t,n){var r=0,o=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function y(e){return null===e}function v(e){return null==e}function m(e){return"number"==typeof e}function w(e){return"string"==typeof e}function b(e){return"symbol"==typeof e}function _(e){return void 0===e}function E(e){return x(e)&&"[object RegExp]"===z(e)}function x(e){return"object"==typeof e&&null!==e}function O(e){return x(e)&&"[object Date]"===z(e)}function j(e){return x(e)&&("[object Error]"===z(e)||e instanceof Error)}function S(e){return"function"==typeof e}function D(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function z(e){return Object.prototype.toString.call(e)}function L(e){return 10>e?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[L(e.getHours()),L(e.getMinutes()),L(e.getSeconds())].join(":");return[e.getDate(),F[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var T=/%[sdj%]/g;n.format=function(e){if(!w(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,s=String(e).replace(T,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),u=r[n];i>n;u=r[++n])s+=y(u)||!x(u)?" "+u:" "+o(u);return s},n.deprecate=function(e,o){function i(){if(!s){if(t.throwDeprecation)throw new Error(o);t.traceDeprecation?console.trace(o):console.error(o),s=!0}return e.apply(this,arguments)}if(_(r.process))return function(){return n.deprecate(e,o).apply(this,arguments)};if(t.noDeprecation===!0)return e;var s=!1;return i};var $,M={};n.debuglog=function(e){if(_($)&&($=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!M[e])if(new RegExp("\\b"+e+"\\b","i").test($)){var r=t.pid;M[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else M[e]=function(){};return M[e]},n.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=g,n.isNull=y,n.isNullOrUndefined=v,n.isNumber=m,n.isString=w,n.isSymbol=b,n.isUndefined=_,n.isRegExp=E,n.isObject=x,n.isDate=O,n.isError=j,n.isFunction=S,n.isPrimitive=D,n.isBuffer=e("./support/isBuffer");var F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",A(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!x(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":5,_process:4,inherits:3}],7:[function(e,t){"use strict";function n(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function r(){}r.prototype._events=void 0,r.prototype.listeners=function(e){if(!this._events||!this._events[e])return[];for(var t=0,n=this._events[e].length,r=[];n>t;t++)r.push(this._events[e][t].fn);return r},r.prototype.emit=function(e,t,n,r,o,i){if(!this._events||!this._events[e])return!1;var s,u,a,l=this._events[e],f=l.length,p=arguments.length,c=l[0];if(1===f){switch(c.once&&this.removeListener(e,c.fn,!0),p){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,o),!0;case 6:return c.fn.call(c.context,t,n,r,o,i),!0}for(u=1,s=new Array(p-1);p>u;u++)s[u-1]=arguments[u];c.fn.apply(c.context,s)}else for(u=0;f>u;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,!0),p){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;default:if(!s)for(a=1,s=new Array(p-1);p>a;a++)s[a-1]=arguments[a];l[u].fn.apply(l[u].context,s)}return!0},r.prototype.on=function(e,t,r){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),this._events[e].push(new n(t,r||this)),this},r.prototype.once=function(e,t,r){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),this._events[e].push(new n(t,r||this,!0)),this},r.prototype.removeListener=function(e,t,n){if(!this._events||!this._events[e])return this;var r=this._events[e],o=[];if(t)for(var i=0,s=r.length;s>i;i++)r[i].fn!==t&&r[i].once!==n&&o.push(r[i]);return this._events[e]=o.length?o:null,this},r.prototype.removeAllListeners=function(e){return this._events?(e?this._events[e]=null:this._events={},this):this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prototype.setMaxListeners=function(){return this},r.EventEmitter=r,r.EventEmitter2=r,r.EventEmitter3=r,"object"==typeof t&&t.exports&&(t.exports=r)},{}]},{},[2])(2)});